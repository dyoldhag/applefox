"use strict";function OutputToList(t){$.each(t,function(t,e){output+='<div class="small-12 medium-4 columns address">',output+='<h3 class="addressTitle">'+e.OUTLET+"</h3>",output+='<p class="addressDesc">'+e.AREA+","+e.STATE+"</p>",output+=""!=e.END?'<p class="addressDate">'+e.START+" - "+e.END+"</p>":'<p class="addressDate">'+e.START+"</p>",""!=e.TIME&&(output+='<p class="addressDate">'+e.TIME+"</p>"),output+="</div>"})}function init(){var t="",e="";e+='<option value="" selected>SELECT AREA</option>',t+='<option value="" selected>SELECT STATE</option>';for(var a=0;a<state.length;a++)t+="<option>"+state[a].state+"</option>";$("#d-state").html(t),$("#d-area").html(e),$("#d-state").change(function(){var t="";t+='<option value="" selected>SELECT AREA</option>';for(var e=0;e<state.length;e++)if(state[e].state==$(this).val()){for(var a=state[e].area,n=0;n<a.length;n++)t+="<option>"+a[n]+"</option>";$("#d-area").html(t)}filter()}),$("#d-area, #d-date, #d-activity").change(function(){filter()})}function filter(){var t=$("#d-date").val(),e=$("#d-activity").val(),a=$("#d-state").val(),n=$("#d-area").val(),r=[],o=[],i=[],c=[],s=[],l=!1;if(""!=e&&($.each(jsonData,function(t,a){a.ACTIVITY==e&&o.push(a)}),1==l?s=s.diff(o):(l=!0,s=jsonData.diff(o))),""!=t&&($.each(jsonData,function(e,a){a.WEEK!=t&&"rm1"!=a.ACTIVITY||r.push(a)}),1==l?s=s.diff(r):(l=!0,s=jsonData.diff(r))),""!=a){var u=new RegExp(a,"i");$.each(jsonData,function(t,e){e.STATE.search(u)!=-1&&i.push(e)}),1==l?s=s.diff(i):(l=!0,s=jsonData.diff(i))}""!=n&&($.each(jsonData,function(t,e){e.AREA==n&&c.push(e)}),1==l?s=s.diff(c):(l=!0,s=jsonData.diff(c))),0==l&&(s=jsonData),output="",$("#filter-records").html(""),$.each(s,function(t,e){output+='<div class="small-12 medium-4 columns address">',output+='<h3 class="addressTitle">'+e.OUTLET+"</h3>",output+='<p class="addressDesc">'+e.AREA+","+e.STATE+"</p>",output+=""!=e.END?'<p class="addressDate">'+e.START+" - "+e.END+"</p>":'<p class="addressDate">'+e.START+"</p>",""!=e.TIME&&(output+='<p class="addressDate">'+e.TIME+"</p>"),output+="</div>"}),$("#filter-records").html(output)}function set_cookie(t,e,a,n){var r=n?"; domain="+n:"";document.cookie=t+"="+encodeURIComponent(e)+"; max-age="+86400*a+"; path=/"+r}function get_cookie(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function agecheck_init(){var t=get_cookie(cookie_name);if(null==t){var e=window.location.href;e.substr(0,e.lastIndexOf("/")),$(location).attr("href","/agegate.html")}}function agecheck_validate(){$(".errors").hide();var t,e=$("#age-dd").val(),a=$("#age-mm").val(),n=$("#age-yy").val();if(is_valid_date(e,a,n))if(t=get_age(e,a,n),t<21)setErrorMsg("You must be 21 and above to view this site.");else if($("#age-box").is(":checked")){set_cookie(cookie_name,t,cookie_duration);var r=document.referrer;r?$(location).attr("href",r):$(location).attr("href","http://applefox.com/")}else setErrorMsg("Please tick the checkbox.");else setErrorMsg("Please enter a valid date.")}function is_valid_date(t,e,a){var n=new Date(a+"-"+e+"-"+t);console.log(n);n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate();return"Invalid Date"!=n}function get_age(t,e,a){var n=new Date,r=new Date(a,e-1,t),o=new Date(n.getFullYear(),r.getMonth(),r.getDate());return n>=o?n.getFullYear()-r.getFullYear():n.getFullYear()-r.getFullYear()-1}function setErrorMsg(t){$(".errors").html(t).show()}var output="",isEmpty=!0,state,jsonData;$(document).foundation(),Modernizr.on("webp",function(t){}),$(document).ready(function(){$("#txt-date").datepicker({onSelect:function(t){filter()}}),$("#txt-date").datepicker("option","dateFormat","d/m/y"),$("#txt-date").datepicker("option","minDate",new Date(2018,2,1)),$("#txt-date").datepicker("option","maxDate",new Date(2018,3,30)),$.getJSON("assets/json/state_area.json",function(t){state=t,init()}),$.getJSON("assets/json/data.js",function(t){jsonData=t,$("#filter-records").html(""),OutputToList(t),$("#filter-records").html(output),filter(),$(".address").matchHeight()})}),Array.prototype.diff=function(t){var e=[];this.sort(),t.sort();for(var a=0;a<this.length;a+=1)t.indexOf(this[a])>-1&&e.push(this[a]);return e};var cookie_name="applefox_age",cookie_duration=1;$(document).ready(function(){$("#agegate").length||agecheck_init(),$("#agegate").submit(function(t){t.preventDefault(),agecheck_validate()})}),function(t,e,a){function n(){var e=h("iframe").concat(h("embed"));r(e),"addEventListener"in t&&t.addEventListener("load",v,!0)}function r(t){var e;for(e=0;e<t.length;e++){var a=o(t[e]);if(a){var n=s(t[e]);l(n)}}}function o(t){var e=t.src||"";return e.indexOf("youtube.com/embed/")>-1||e.indexOf("youtube.com/v/")>-1}function i(t){return t.indexOf("enablejsapi")>-1}function c(t){return t.indexOf("origin")>-1}function s(a){var n=e.location,r=t.createElement("a");r.href=a.src,r.hostname="www.youtube.com",r.protocol=n.protocol;var o="/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname;if(i(r.search)||(r.search=(r.search.length>0?r.search+"&":"")+"enablejsapi=1"),!c(r.search)&&n.hostname.indexOf("localhost")===-1){var s=n.port?":"+n.port:"",l=n.protocol+"%2F%2F"+n.hostname+s;r.search=r.search+"&origin="+l}if("application/x-shockwave-flash"===a.type){var u=t.createElement("iframe");u.height=a.height,u.width=a.width,o=o.replace("/v/","/embed/"),a.parentNode.parentNode.replaceChild(u,a.parentNode),a=u}return r.pathname=o,a.src!==r.href+r.hash&&(a.src=r.href+r.hash),a}function l(t){var e=YT.get(t.id);e||(e=new YT.Player(t,{})),"undefined"==typeof t.pauseFlag&&(t.pauseFlag=!1,e.addEventListener("onStateChange",function(e){f(e,t)}))}function u(t){var e={};if(y.events["Watch to End"]&&(e["Watch to End"]=Math.min(t-3,Math.floor(.99*t))),y.percentageTracking){var a,n=[];if(y.percentageTracking.each&&(n=n.concat(y.percentageTracking.each)),y.percentageTracking.every){var r=parseInt(y.percentageTracking.every,10),o=100/r;for(a=1;a<o;a++)n.push(a*r)}for(a=0;a<n.length;a++){var i=n[a],c=i+"%",s=t*i/100;e[c]=Math.floor(s)}}return e}function d(t,e,a,n,r){var o,i=t.getCurrentTime();t[a]=t[a]||{};for(o in e)e[o]<=i&&!t[a][o]&&(t[a][o]=!0,p(a,o,n,r))}function f(t,e){var a=t.data,n=t.target,r=n.getVideoUrl(),o=r.match(/[?&]v=([^&#]*)/)[1],i=n.getPlayerState(),c=Math.floor(n.getDuration()),s=u(c);if(null==n.a.attributes["data-category"])l="Body | "+pageTitle;else{var l=n.a.attributes["data-category"].value;l=l+" | "+pageTitle}if(null==n.a.attributes["data-label"])f=r;else{var f=n.a.attributes["data-label"].value;f=f}var g={1:"Play",2:"Pause"},h=g[a];if(e.playTracker=e.playTracker||{},1!==i||e.timer?(clearInterval(e.timer),e.timer=!1):(clearInterval(e.timer),e.timer=setInterval(function(){d(n,s,e.videoId,l,f)},1e3)),1===a&&(e.playTracker[o]=!0,e.videoId=o,e.pauseFlag=!1),!e.playTracker[e.videoId])return!1;if(2===a){if(e.pauseFlag)return!1;e.pauseFlag=!0}$[h]&&p(e.videoId,h,l,f)}function p(t,a,n,r){var o="https://www.youtube.com/watch?v="+t,i=e.GoogleAnalyticsObject;"undefined"==typeof e[T]||y.forceSyntax?"function"==typeof e[i]&&"function"==typeof e[i].getAll&&2!==y.forceSyntax?e[i]("send","event",e.ga_category,"Video "+a,o):"undefined"!=typeof e._gaq&&1!==E&&e._gaq.push(["_trackEvent",e.ga_category,"Video "+a,o]):e[T].push({event:"GAEvent",eventCategory:n,eventLabel:r,eventAction:"Click Play - "+a})}function g(t,e,a){t.addEventListener?t.addEventListener(e,a):t.attachEvent?t.attachEvent("on"+e,function(e){e.target=e.target||e.srcElement,a.call(t,e)}):"undefined"!=typeof t["on"+e]&&null!==t["on"+e]||(t["on"+e]=function(e){e.target=e.target||e.srcElement,a.call(t,e)})}function h(e){return[].slice.call(t.getElementsByTagName(e))}function v(t){var e=t.target||t.srcElement,a=o(e);"IFRAME"===e.tagName&&a&&i(e.src)&&c(e.src)&&l(e)}var m,y=a||{},E=y.forceSyntax||0,T=y.dataLayerName||"dataLayer",$={Play:!0,Pause:!0,"Watch to End":!0},b=t.createElement("script");b.src="//www.youtube.com/iframe_api";var k=t.getElementsByTagName("script")[0];k.parentNode.insertBefore(b,k);for(m in y.events)y.events.hasOwnProperty(m)&&($[m]=y.events[m]);e.onYouTubeIframeAPIReady=function(){var a=e.onYouTubeIframeAPIReady;return function(){a&&a.apply(this,arguments),navigator.userAgent.match(/MSIE [67]\./gi)||("loading"!==t.readyState?n():t.addEventListener?g(t,"DOMContentLoaded",n):g(e,"load",n))}}()}(document,window,{events:{Play:!0,Pause:!0,"Watch to End":!0},percentageTracking:{every:25,each:[10,90]}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e,a){function n(){l("Check"),e.ga&&ga.create&&!f?(f=!0,l("GA is loaded"),r()):setTimeout(function(){n()},500)}function r(){l("Init Event Tracking");for(var t=u.type,e=0;e<t.length;e++)l("Type: "+t[e]+" included for tracking"),"a"==t[e]?$(t[e]+":not(.button)").on("click",o):"a.button"!=t[e]&&"button"!=t[e]&&"input[type=submit]"!=t[e]||$(t[e]).on("click",i)}function o(t){var e=c($(this)),a=($(this).attr("href"),$(this).attr("target"),$(this).attr("data-title")),n="";if($(this).find("img").length>0){var r=$(this).find("img"),o=r.attr("alt");n="undefined"!==("undefined"==typeof o?"undefined":_typeof(o))&&o!==!1&&o.length>0?r.attr("alt"):r.attr("src")}else n=$(this).text();var i="Click Link",l=a?a:n;s(e,i,l,"GAEvent")}function i(t){var e=$(t.target),a=c($(this)),n=e.attr("data-title"),r="",o=e.find("img");if(o.length>0){var i=o.attr("alt");r="undefined"!==("undefined"==typeof i?"undefined":_typeof(i))&&i!==!1&&i.length>0?o.attr("alt"):o.attr("src")}else r=e.text();var l="Click Button",u=n?n:r;s(a,l,u,"GAEvent")}function c(t){var e="";return e=t.parents("header").length>0&&t.parents("nav").length>0?"Header":t.parents("footer").length>0?"Footer":t.parents("aside").length>0?"Cross Sell":t.parents("article").length>0?"Article":(t.parents("main").length>0,"Body")}function s(t,a,n){var r=e.GoogleAnalyticsObject,t=t+" | "+pageTitle;"undefined"!=typeof e[d]?"VirtualPageview"==event?e[d].push({event:"VirtualPageview",virtualPageTitle:t,virtualPageURL:a}):e[d].push({event:"GAEvent",eventCategory:t,eventLabel:n,eventAction:a}):"function"==typeof e[r]&&"function"==typeof e[r].getAll?e[r]("send",{hitType:"event",eventCategory:t,eventAction:a,eventLabel:n}):"undefined"!=typeof e._gaq&&e._gaq.push(["_trackEvent",t,a,n])}function l(t){u.debug&&console.log(t)}var u=a||{},d="dataLayer",f=!1;e.addEventListener("load",function(){n()},!1)}(document,window,{debug:!1,type:["a","a.button","button","input[type=submit]"]});